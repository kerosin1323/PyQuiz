{% extends "base.html" %}

{% block content %}
<form action="" method="post" novalidate enctype=multipart/form-data>
    {% if current_user.id == user_id %}
        <div class="profile" style="color:white; position: relative;
            top: 80%;
            left: 50%;
            transform: translate(-50%, -50%);
            height:50%;
            width: 50%">
            <div style="display:flex">
                <div class="image">
                    <img src="/static/images/{{ current_user.photo }}" alt="photo" height="150px" width="150px" style="margin-top:20px;border-radius:50%">
                </div>
                <div style="font-weight:600;margin-top:45px;margin-left:20px;font-size:25px">
                    <p> {{ name }}</p>
                    <div style="display:flex">
                        <p>–†–µ–π—Ç–∏–Ω–≥: {{ mark }}</p>
                        <div style="margin-left:20px">
                            <p>–ü–æ–¥–ø–∏—Å—á–∏–∫–∏: {{ subscribers }}</p>
                        </div>
                </div>
                </div>
            </div>
            <div style="display:flex;margin-top:15px">
                <div class="description" style="width: 50%; float: left">
                    {% if description %}
                    <p>–û–ø–∏—Å–∞–Ω–∏–µ:</p>
                    <p>{{ description }} </p>
                    {% endif %}
                </div>
                <div class="contacts" style="width: 50%; float: right">
                    {% if contacts %}
                    <p>–ö–æ–Ω—Ç–∞–∫—Ç—ã: </p>
                    <p>{{ contacts }} </p>
                    {% endif %}
                </div>
            </div>
            <div style="display:flex;margin-top:15px">
                <div style="width: 50%; float: left">
                    <p>{{ form.add_data(class='btn btn-outline-primary') }}</p>
                </div>
                <div  style="width: 50%; float: right">
                    <p>{{ form.exit(class='btn btn-outline-danger') }}</p>
                </div>
            </div>
            <div style="display:flex;margin-top:15px">
                <div style="float: left">
                    {{ form.follow(class='btn btn-outline-primary') }}
                </div>
                <div style="width: 50%;">
                    <p>{{ form.created_articles(class='btn btn-info') }}</p>
                </div>
            <div style="float: right">
                    <p>{{ form.subscribe(class='btn btn-info') }}</p>
                </div>
                </div>
        </div>
    {% else %}
    <div class="profile" style="color:white">
        {% if photo %}
        <div class="image">
            <img src="/static/images/{{ photo }}" alt="photo" height="150px" width="150px" style="margin-top:10px">
        </div>
        {% endif %}
        <div style="font-weight:600">
            <p>{{ name }}</p>
        </div>
        <p>–û—Ü–µ–Ω–∫–∞: {{ mark }}</p>
        <p>–ü–æ–¥–ø–∏—Å—á–∏–∫–∏: {{ subscribers }}</p>
        {% if contacts %}
                <p>–ö–æ–Ω—Ç–∞–∫—Ç—ã: {{ contacts }}</p>
                {% endif %}
                {% if description %}
                <p>–û–ø–∏—Å–∞–Ω–∏–µ: {{ description }}</p>
                {% endif %}
                <p>{{ form.follow(class='btn btn-outline-primary') }}</p>

            {% if is_subscribed %}
            <div class="follow">
                <button name="to_subscribe" class="btn btn-secondary" value="1">–û—Ç–ø–∏—Å–∞—Ç—å—Å—è</button>
            </div>
            {% else %}
            <div class="follow">
                <button name="to_subscribe" class="btn btn-danger" value="1">–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è</button>
            </div>
            {% endif %}
        <p>{{ form.created_articles(class='btn btn-info') }}</p>
    </div>
    {% endif %}
     <div class="container" style="float: left; width: 200%; margin-left: 100px; overflow-wrap: break-word;">
        {% for article in user_articles %}
            <div class="article">
                <div style="display:flex" class="first_level">
                    <div class="image">
                        <img src="/static/images/{{ current_user.photo }}" alt="photo" height="50px" width="50px" style="margin-top:20px">
                    </div>
                    <div style="margin-bottom:15px;margin-left:15px;margin-right:15px" class="creator">
                        <a class="creator_name" style="font-size:15px;text-decoration: none;color:white" href="/profile/{{article.user_id}}"> {{ current_user.name }}</a>
                    </div>
                    <div class="time">
                        <h3>{{passed_time}}</h3>
                    </div>
                </div>
                <div class="name_article" style="color:white">
                    <h2>{{article.name}}</h2>
                </div>
                {% if article.photo %}
                <div class="image">
                    <img src="/static/images/{{ article.photo }}" alt="photo" height="100%" width="100%">
                </div>
                {% endif %}
                <div style="color:white">
                {{ article.describe }}
                </div>
                <hr>
                <div class="under-photo" style="display: flex; justify-content: space-between;color:white">

                    <button
                        class="btn btn-outline-primary" name="id" value="{{ article.id }}" >–ß–∏—Ç–∞—Ç—å
                    </button>
                    {% if current_user.id == article.user_id %}
                    <div style="margin-left:590px">
                        <button
                            class="btn btn-outline-danger" name="delete" value="{{ article.id }}" >–£–¥–∞–ª–∏—Ç—å
                        </button>
                    </div>
                    {% endif %}
                    <div class="article_mark" style="float: right">
                            {% if article.mark > 0 %}
                                <div title="–û—Ü–µ–Ω–∫–∞" style="color:#00ff00; float: right">
                                    <strong>
                                        +{{article.mark}}
                                    </strong>
                                </div>
                            {% elif article.mark == 0 %}
                                <div title="–û—Ü–µ–Ω–∫–∞" style="color:white; float: right">
                                    <strong>
                                        {{article.mark}}
                                    </strong>
                                </div>
                            {% else %}
                                <div title="–û—Ü–µ–Ω–∫–∞" style="color: red; float: right">
                                    <strong>
                                        {{article.mark}}
                                    </strong>
                                </div>
                            {% endif %}
                            <div class="readings" title="–ö–æ–ª-–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤" style="color:white; float: right; margin-right: 10px">
                                üëÅ{{ article.readings }}
                            </div>
                            <div class="amount_comments" title="–ö–æ–ª-–≤–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤" style="color:white; float: right; margin-right: 10px">
                                {{ amount_comments_articles[article.id|string] }}
                            </div>
                    </div>
                </div>

            </div>
        {% endfor %}
    </div>
</form>
{% endblock %}